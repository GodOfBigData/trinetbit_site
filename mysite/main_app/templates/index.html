<!DOCTYPE html>
{% extends "base.html" %}
{% load i18n %}
{% block content %}
<body>
    <main class="main main-index" id="main-index">
        <div class="container container-main container-index" id="container-index">
            <p class="index-heading"><spa class="excretion">TRINETBIT</spa> - простой способ получать прибыль.</p>
            <div class="container-index-cards">
                <ul class="list-index-cards">
                    <li class="index-card">
                        <p class="text-card">2343</p>
                        <p class="text-card lower-index-text-card">зарегистрированных клиента</p>
                    </li>
                    <li class="index-card">
                        <p class="text-card">12,5%</p>
                        <p class="text-card lower-index-text-card">средний ежемесячный процент</p>
                    </li>
                    <li class="index-card">
                        <p class="text-card">81,7%</p>
                        <p class="text-card lower-index-text-card">средний процент закрытых сделок в плюс</p>
                    </li>
                </ul>
            </div>
            <div class="container-index-cards">
                <ul class="list-index-cards">
                    <li class="index-card">
                        <p class="text-card">4235$</p>
                        <p class="text-card lower-index-text-card">средняя прибыль клиента за месяц</p>
                    </li>
                    <li class="index-card">
                        <p class="text-card">2 154 235$</p>
                        <p class="text-card lower-index-text-card">суммарная прибыль клиентов за месяц</p>
                    </li>
                    <li class="index-card">
                        <p class="text-card">1 неделя</p>
                        <p class="text-card lower-index-text-card">среднее время получения первой прибыли</p>
                    </li>
                </ul>
            </div>
            <p class="text-details-index">Узнать <a href="{% url 'project' %}" class="excretion">подробнее</a> о продукте.</p>
            <p class="text-details-index text-calculate-index">Рассчитайте <span class="excretion">свой</span> доход сейчас.</p>
            <div class="container-calc-profit">
                <ul class="list-input-index">
                    <li class="item-input-index"><input type="text" maxlength="150" required="" id="start_depo" value="Стартовый депозит" class="label label-index"></li>
                    <li class="item-input-index"><input type="text" maxlength="150" required="" id="time_month" value="Время в месяцах" class="label label-index"></li>
                    <li class="item-input-index"><input type="text" maxlength="150" required="" id="profit" value="Ваша прибыль" class="label label-index"></li>
                </ul>
                <p class="remark-index">*Прибыль рассчитывается исходя из среднего ежемесячного процента.</p>
            </div>
            <p class="bottom-heading-index">Начните получать прибыль.</p>
            <a href="{% url 'guide' %}" class="link-instruction-index"><p class="text-instruction-index"><span class="excretion">Инструкция</span> с порядком действий</p></a>
            <a class="link-register-index" href="{% url 'register' %}">ЗАРЕГИСТРИРОВАТЬСЯ</a>
        </div>
        <div class="elipse"></div>
        <div class="elipse elipse-top"></div>
    </main>
    <script type="text/javascript">
        const screenWidth = window.innerWidth

        if (screenWidth < 1800) {
            document.getElementById('main-index').style.width = String(screenWidth) + "px";
            if (window.innerHeight > 900) {
                document.getElementById('container-index').style.transform = "scale(0.97, 0.97)";
                document.getElementById('header').style.height = String(window.innerHeight * 0.076) + "px";
                document.getElementById('header').style.padding = String(window.innerHeight * 0.015) + "px 0 0 0";
                let screenHeight= window.innerHeight + window.innerHeight * 0.1
                document.getElementById('main-index').style.height = String(screenHeight) + "px";
                document.getElementById('container-index').style.width = String(screenWidth) + 'px';
                let padding_index_container = screenHeight * 0.2
                document.getElementById('container-index').style.padding = padding_index_container + "px 0 0 0";
                document.getElementById('main-index').style.width = String(screenWidth) + "px";

            } 
            else {
                document.getElementById('container-index').style.transform = "scale(0.8, 0.8)";
                let screenHeight= window.innerHeight +  0.7 * window.innerHeight
                document.getElementById('main-index').style.height = String(screenHeight) + "px";
                document.getElementById('container-index').style.width = String(screenWidth) + 'px';
                let padding_index_container = screenHeight * 0.08
                document.getElementById('container-index').style.padding = padding_index_container + "px 0 0 0";
                document.getElementById('main-index').style.width = String(screenWidth) + "px";

            }
        }

        let  start_depo = document.getElementById('start_depo');
            time_month = document.getElementById('time_month');
            profit = document.getElementById('profit');

        function removePlaceholderDepo(start_depo)  {
            if (start_depo.value == "Стартовый депозит") {
                start_depo.value = "";
            }
        }

        function replacePlaceholderDepo(start_depo)  {
            if (start_depo.value == "") {
                start_depo.value = "Стартовый депозит";
            }
        }

        function removePlaceholderTime(time_month)  {
            if (time_month.value == "Время в месяцах") {
                time_month.value = "";
            }
        }

        function replacePlaceholderTime(time_month)  {
            if (time_month.value == "") {
                time_month.value = "Время в месяцах";
            }
        }

        function removePlaceholderProfit(profit)  {
            if (profit.value == "Ваша прибыль") {
                profit.value = "";
            }
        }

        function replacePlaceholderProfit(profit)  {
            if (profit.value == "" ) {
                profit.value = "Ваша прибыль";
            }
        }

        function getProfit()  {
            let start_depo = document.getElementById('start_depo');
                time_month = document.getElementById('time_month');
                profit = document.getElementById('profit');
            if (time_month.value != "Время в месяцах" && start_depo.value != "Стартовый депозит") {
                let profit_month = 0
                    month = Number(time_month.value)
                    start_depo_value = Number(start_depo.value)
                    depo = Number(start_depo.value)
                for (let i = 0; i < month; i++) {
                    depo = depo * 1.125
                    }
                profit.value = Math.round((depo - start_depo_value) * 100) / 100
            }
            if (profit.value == "0" || profit.value == "0") {
                profit.value = "Ваша прибыль";
            }
        }
        
        setInterval(getProfit, 2000);
        start_depo.setAttribute('onBlur', "replacePlaceholderDepo(this)");
        start_depo.setAttribute('onFocus', "removePlaceholderDepo(this)");
        time_month.setAttribute('onBlur', "replacePlaceholderTime(this)");
        time_month.setAttribute('onFocus', "removePlaceholderTime(this)");
        profit.setAttribute('onBlur', "replacePlaceholderProfit(this)");
        profit.setAttribute('onFocus', "removePlaceholderProfit(this)");
    </script>
</body>
{% endblock %}